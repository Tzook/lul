'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const master_model_1 = require("../master/master.model");
class RoomsModel extends master_model_1.default {
    init(files, app) {
        this.controller = files.controller;
        this.schema = {
            name: String,
            portals: this.mongoose.Schema.Types.Mixed,
            spawns: this.mongoose.Schema.Types.Mixed
        };
        this.hasId = false;
        this.strict = false;
        this.addToCharacterSchema = {
            room: { type: String, default: files.config.DEFAULT_ROOM }
        };
    }
    get priority() {
        return 20;
    }
    createModel() {
        this.setModel('Rooms');
        this.addToSchema('Character', this.addToCharacterSchema);
        setTimeout(() => this.controller.warmRoomsInfo());
        return Promise.resolve();
    }
}
exports.default = RoomsModel;
;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NlcnZlci9saWIvcm9vbXMvcm9vbXMubW9kZWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOztBQUNiLHlEQUFpRDtBQUdqRCxnQkFBZ0MsU0FBUSxzQkFBVztJQUkvQyxJQUFJLENBQUMsS0FBSyxFQUFFLEdBQUc7UUFDWCxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxVQUFVLENBQUM7UUFFbkMsSUFBSSxDQUFDLE1BQU0sR0FBRztZQUNWLElBQUksRUFBRSxNQUFNO1lBQ1osT0FBTyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLO1lBQ3pDLE1BQU0sRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSztTQUMzQyxDQUFDO1FBQ0YsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFFcEIsSUFBSSxDQUFDLG9CQUFvQixHQUFHO1lBQ3hCLElBQUksRUFBRSxFQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsWUFBWSxFQUFDO1NBQzNELENBQUM7SUFDTixDQUFDO0lBRUQsSUFBSSxRQUFRO1FBQ1IsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFFRCxXQUFXO1FBQ1AsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN2QixJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUUvRCxVQUFVLENBQUMsTUFBTSxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7UUFDNUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUM3QixDQUFDO0NBQ0o7QUEvQkQsNkJBK0JDO0FBQUEsQ0FBQyIsImZpbGUiOiJsaWIvcm9vbXMvcm9vbXMubW9kZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5pbXBvcnQgTWFzdGVyTW9kZWwgZnJvbSAnLi4vbWFzdGVyL21hc3Rlci5tb2RlbCc7XG5pbXBvcnQgUm9vbXNDb250cm9sbGVyIGZyb20gXCIuL3Jvb21zLmNvbnRyb2xsZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm9vbXNNb2RlbCBleHRlbmRzIE1hc3Rlck1vZGVsIHtcbiAgICBwcml2YXRlIGFkZFRvQ2hhcmFjdGVyU2NoZW1hO1xuXHRwcm90ZWN0ZWQgY29udHJvbGxlcjogUm9vbXNDb250cm9sbGVyO1xuICAgIFxuICAgIGluaXQoZmlsZXMsIGFwcCkge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSBmaWxlcy5jb250cm9sbGVyO1xuXG4gICAgICAgIHRoaXMuc2NoZW1hID0ge1xuICAgICAgICAgICAgbmFtZTogU3RyaW5nLFxuICAgICAgICAgICAgcG9ydGFsczogdGhpcy5tb25nb29zZS5TY2hlbWEuVHlwZXMuTWl4ZWQsXG4gICAgICAgICAgICBzcGF3bnM6IHRoaXMubW9uZ29vc2UuU2NoZW1hLlR5cGVzLk1peGVkXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaGFzSWQgPSBmYWxzZTsgLy8gaXQgYWN0dWFsbHkgaGFzIGFuIGlkIGJ1dCBzYXZlZCBvbmx5IGluIHRoZSBkYlxuICAgICAgICB0aGlzLnN0cmljdCA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuYWRkVG9DaGFyYWN0ZXJTY2hlbWEgPSB7XG4gICAgICAgICAgICByb29tOiB7dHlwZTogU3RyaW5nLCBkZWZhdWx0OiBmaWxlcy5jb25maWcuREVGQVVMVF9ST09NfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGdldCBwcmlvcml0eSgpIHtcbiAgICAgICAgcmV0dXJuIDIwO1xuICAgIH1cblxuICAgIGNyZWF0ZU1vZGVsKCkge1xuICAgICAgICB0aGlzLnNldE1vZGVsKCdSb29tcycpO1xuICAgICAgICB0aGlzLmFkZFRvU2NoZW1hKCdDaGFyYWN0ZXInLCB0aGlzLmFkZFRvQ2hhcmFjdGVyU2NoZW1hKTtcblxuXHRcdHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jb250cm9sbGVyLndhcm1Sb29tc0luZm8oKSk7IC8vIHRpbWVvdXQgc28gdGhlIE1vZGVsIGNhbiBiZSBzZXRcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn07Il19
